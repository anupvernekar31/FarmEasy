{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROJECTS\\\\dbs\\\\frontend\\\\src\\\\components\\\\my-listing-item\\\\MyListingItem.jsx\";\nimport React from 'react';\nimport { Card, CardHeader, CardBody, Container } from 'reactstrap';\nimport { getAuthHeader, getAuthToken, getUserId } from '../../utils/Authorization';\nimport axios from 'axios';\nimport './MyListingItem.css';\nimport ListingBidsItem from '../listing-bids-item/ListingBidsItem';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass MyListingItem extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.handleDelete = event => {\n      event.preventDefault();\n      this.deleteListing(this.props.user._id);\n      this.getBids = this.getBids.bind(this);\n    };\n  }\n\n  getBids(id) {\n    let prod = this.props.myBids.filter(value => value.prod_listing_id === id);\n    return prod;\n  }\n\n  getProductName(id) {\n    let prod = this.props.products.filter(value => value._id === id);\n    if (prod.length > 0) return prod[0].productname;\n    return \"\";\n  }\n\n  deleteListing(listingId) {\n    let authToken = getAuthToken();\n    let id = getUserId();\n    axios.post(\"http://localhost:3030/api/farmer/deleteListing\", {\n      id,\n      listingId\n    }, getAuthHeader(authToken)).then(res => {\n      this.props.listingChanged();\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Card, {\n      className: \"shadow-lg mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n        className: \" d-flex justify-content-between align-items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n          className: \"text-primary font-weight-bold m-0\",\n          children: [\"Listing Id: \", this.props.user._id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 25\n        }, this), this.props.user.status === \"open\" ? /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"\",\n          className: \"btn btn-danger btn-circle ml-1\",\n          onClick: this.handleDelete,\n          role: \"button\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-trash text-white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 33\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"m-0\",\n          children: [\"Status : \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: this.props.user.status === \"open\" ? \"green\" : \"red\",\n            children: this.props.user.status\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 53\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"m-0\",\n          children: [\"Product Name : \", this.getProductName(this.props.user.product_id)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"m-0\",\n          children: [\"Minimum Price : \", this.props.user.min_price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"m-0\",\n          children: [\"Quantity : \", this.props.user.quantity]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Container, {\n          className: \"bg-info p-3 shadow-lg\",\n          children: [/*#__PURE__*/_jsxDEV(Container, {\n            className: \"container-fluid\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-sm-flex justify-content-between align-items-center mb-4\",\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-light mb-0\",\n                children: \"Bids\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 73,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Container, {\n            className: \"container-fluid mb-5 \",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: this.getBids(this.props.user._id).length > 0 ? this.getBids(this.props.user._id).map(listing => /*#__PURE__*/_jsxDEV(ListingBidsItem, {\n                user: listing,\n                bidsChanged: this.props.bidsChanged\n              }, listing._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 33\n              }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center\",\n                children: \"No Bids\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 42\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\n;\nexport default MyListingItem;","map":{"version":3,"sources":["D:/PROJECTS/dbs/frontend/src/components/my-listing-item/MyListingItem.jsx"],"names":["React","Card","CardHeader","CardBody","Container","getAuthHeader","getAuthToken","getUserId","axios","ListingBidsItem","MyListingItem","Component","handleDelete","event","preventDefault","deleteListing","props","user","_id","getBids","bind","id","prod","myBids","filter","value","prod_listing_id","getProductName","products","length","productname","listingId","authToken","post","then","res","listingChanged","catch","e","console","log","render","status","product_id","min_price","quantity","map","listing","bidsChanged"],"mappings":"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","sourcesContent":["\nimport React from 'react';\nimport { Card, CardHeader , CardBody,Container} from 'reactstrap';\nimport { getAuthHeader, getAuthToken, getUserId } from '../../utils/Authorization';\n\nimport axios from 'axios';\n\nimport './MyListingItem.css';\nimport ListingBidsItem from '../listing-bids-item/ListingBidsItem';\n\nclass MyListingItem extends React.Component{\n    handleDelete = event =>\n    {\n        event.preventDefault();\n        this.deleteListing(this.props.user._id);\n        this.getBids = this.getBids.bind(this);\n    \n        \n    }\n\n    getBids(id)\n    {\n        let prod = this.props.myBids.filter(value => value.prod_listing_id===id);\n        return prod;\n    }\n\n    getProductName(id)\n    {\n        let prod = this.props.products.filter(value => value._id===id);\n        if(prod.length>0)\n            return prod[0].productname;\n        return \"\";\n    }\n    deleteListing(listingId)\n    {\n        let authToken = getAuthToken();\n        let id = getUserId();\n        axios.post(\"http://localhost:3030/api/farmer/deleteListing\",{id,listingId},getAuthHeader(authToken)).then(res => {\n                this.props.listingChanged();\n            }).catch(e=>{\n                console.log(e);\n            });\n    }\n\n\n\n    render(){\n\n        return(\n            \n            <Card className=\"shadow-lg mb-4\">\n                \n                    <CardHeader className=\" d-flex justify-content-between align-items-center\">\n                        <h6 className=\"text-primary font-weight-bold m-0\">Listing Id: {this.props.user._id}</h6>\n                        {\n                            this.props.user.status===\"open\"?\n                            (\n                                <a href=\"\" className=\"btn btn-danger btn-circle ml-1\" onClick={this.handleDelete} role=\"button\">\n                                <i className=\"fas fa-trash text-white\"></i>\n                            </a>\n                            ):null\n                        }\n                        \n                    </CardHeader>\n                    <CardBody>\n                        <p className=\"m-0\">Status : <span className={this.props.user.status===\"open\"?\"green\":\"red\"}>{this.props.user.status}</span></p>\n                        <p className=\"m-0\">Product Name : {this.getProductName(this.props.user.product_id)}</p>\n                        <p className=\"m-0\">Minimum Price : {this.props.user.min_price}</p>\n                        <p className=\"m-0\">Quantity : {this.props.user.quantity}</p>\n                        <Container className=\"bg-info p-3 shadow-lg\">\n                            <Container className=\"container-fluid\">\n                                <div className=\"d-sm-flex justify-content-between align-items-center mb-4\">\n                                    <h3 className=\"text-light mb-0\">Bids</h3>\n                                </div>\n                            </Container>\n                            <Container className=\"container-fluid mb-5 \">\n                            <div>\n                            {\n                                this.getBids(this.props.user._id).length>0?\n                                this.getBids(this.props.user._id).map(listing=>(\n                                <ListingBidsItem key={listing._id} user={listing} bidsChanged={this.props.bidsChanged}/>\n                            ))\n                            :\n                                        (<div className=\"text-center\">No Bids</div>)  \n                            }\n                            </div>\n                            </Container>\n                        </Container>\n                    </CardBody>\n             \n            </Card>\n        );\n    }\n};\n\nexport default MyListingItem;"]},"metadata":{},"sourceType":"module"}