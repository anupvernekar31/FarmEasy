{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROJECTS\\\\dbs\\\\frontend\\\\src\\\\pages\\\\buyerpage\\\\BuyerPage.jsx\";\nimport React from 'react';\nimport AdminHeader from \"../../components/admin-header/AdminHeader\";\nimport NavigationSideBar from '../../components/navigation/Navigation';\nimport { getAuthHeader, getAuthToken, getUserId } from '../../utils/Authorization';\nimport { withRouter } from 'react-router-dom';\nimport axios from 'axios';\nimport BidProduct from '../../components/bid-product/BidProduct';\nimport MyBids from '../../components/my-bids/MyBids';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass BuyerPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleMenu = event => {\n      event.preventDefault();\n      this.setState({\n        currentPage: event.target.id\n      });\n    };\n\n    this.state = {\n      nav: [{\n        key: \"1\",\n        active: true,\n        name: 'New Bid'\n      }, {\n        key: \"2\",\n        active: false,\n        name: 'My Biddings'\n      }],\n      currentPage: \"1\",\n      user: '',\n      products: [],\n      bids: []\n    };\n    this.logout = this.logout.bind(this);\n    this.getBids = this.getBids.bind(this);\n  }\n\n  getBids() {\n    let authToken = getAuthToken();\n    let id = getUserId();\n    axios.post(\"http://localhost:3030/api/buyer/getBids\", {\n      id\n    }, getAuthHeader(authToken)).then(res => {\n      this.setState({\n        bids: res.data\n      });\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  getProducts() {\n    let authToken = getAuthToken();\n    let id = getUserId();\n    axios.post(\"http://localhost:3030/api/buyer/getAllProducts\", {\n      id\n    }, getAuthHeader(authToken)).then(res => {\n      this.setState({\n        products: res.data\n      });\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  componentDidMount() {\n    const {\n      history\n    } = this.props;\n    let authToken = getAuthToken();\n    let id = getUserId();\n\n    if (id && authToken) {\n      axios.post(\"http://localhost:3030/api/buyer/getUser\", {\n        id\n      }, getAuthHeader(authToken)).then(res => {\n        this.setState({\n          user: res.data\n        });\n      }).catch(e => {\n        localStorage.clear();\n        this.props.handleLogout();\n        history.push('/');\n      });\n      this.getProducts();\n      this.getBids();\n    } else {\n      history.push('/');\n    }\n  }\n\n  logout() {\n    const {\n      history\n    } = this.props;\n    localStorage.clear();\n    this.props.handleLogout();\n    history.push('/');\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(NavigationSideBar, {\n        navitems: this.state.nav,\n        navtitle: \"FarmEasy\",\n        handleMenuClick: this.handleMenu,\n        currentPage: this.state.currentPage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-column\",\n        id: \"content-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(AdminHeader, {\n          userName: this.state.user ? this.state.user.username : \"Loading\",\n          handleLogout: this.logout\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 17\n        }, this), this.state.currentPage === \"1\" ? /*#__PURE__*/_jsxDEV(BidProduct, {\n          products: this.state.products,\n          bidsChanged: this.getBids\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(MyBids, {\n          bids: this.state.bids,\n          bidsChanged: this.getBids\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\n;\nexport default _c = withRouter(BuyerPage);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["D:/PROJECTS/dbs/frontend/src/pages/buyerpage/BuyerPage.jsx"],"names":["React","AdminHeader","NavigationSideBar","getAuthHeader","getAuthToken","getUserId","withRouter","axios","BidProduct","MyBids","BuyerPage","Component","constructor","props","handleMenu","event","preventDefault","setState","currentPage","target","id","state","nav","key","active","name","user","products","bids","logout","bind","getBids","authToken","post","then","res","data","catch","e","console","log","getProducts","componentDidMount","history","localStorage","clear","handleLogout","push","render","username"],"mappings":"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","sourcesContent":["import React from 'react';\nimport AdminHeader from \"../../components/admin-header/AdminHeader\";\nimport NavigationSideBar from '../../components/navigation/Navigation';\nimport { getAuthHeader, getAuthToken, getUserId } from '../../utils/Authorization';\nimport { withRouter } from 'react-router-dom';\n\nimport axios from 'axios';\nimport BidProduct from '../../components/bid-product/BidProduct';\nimport MyBids from '../../components/my-bids/MyBids';\n\nclass BuyerPage extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            nav : [{key:\"1\",active:true, name:'New Bid'},{key:\"2\",active:false, name:'My Biddings'}],\n            currentPage:\"1\",\n            user:'',\n            products:[],\n            bids:[],\n        }\n        this.logout = this.logout.bind(this);\n        this.getBids = this.getBids.bind(this);\n       \n    }\n\n    getBids()\n    {\n        let authToken = getAuthToken();\n        let id = getUserId();\n        axios.post(\"http://localhost:3030/api/buyer/getBids\",{id},getAuthHeader(authToken)).then(res => {\n            this.setState({bids:res.data});\n           }).catch(e=>{\n              console.log(e);\n           });\n    }\n\n    getProducts()\n    {\n        let authToken = getAuthToken();\n        let id = getUserId();\n        axios.post(\"http://localhost:3030/api/buyer/getAllProducts\",{id},getAuthHeader(authToken)).then(res => {\n            this.setState({products:res.data});\n           }).catch(e=>{\n              console.log(e);\n           });\n    }\n\n    componentDidMount()\n    {\n        const {history} = this.props;\n        let authToken = getAuthToken();\n        let id = getUserId();\n        if(id && authToken)\n        {\n             axios.post(\"http://localhost:3030/api/buyer/getUser\",{id},getAuthHeader(authToken)).then(res => {\n                this.setState({user:res.data});\n              }).catch(e=>{\n                  localStorage.clear();\n                  this.props.handleLogout();\n                history.push('/');\n              });\n              this.getProducts();\n              this.getBids();\n        }\n        else\n        {\n            history.push('/');\n        }\n       \n    }\n\n\n    handleMenu = event =>{\n        event.preventDefault();\n        this.setState({currentPage:event.target.id});\n    \n    }\n\n    logout()\n    {\n        const {history} = this.props;\n        localStorage.clear();\n        this.props.handleLogout();\n      history.push('/');\n    }\n\n    render(){\n        return(\n        <div >\n            <NavigationSideBar navitems={this.state.nav} navtitle=\"FarmEasy\" handleMenuClick={this.handleMenu} currentPage={this.state.currentPage}/>\n            <div className=\"d-flex flex-column\" id=\"content-wrapper\">\n                <AdminHeader userName={(this.state.user)?this.state.user.username:\"Loading\"} handleLogout={this.logout}/>\n                {\n                    this.state.currentPage===\"1\"?\n                    (\n                        <BidProduct products={this.state.products} bidsChanged={this.getBids}/>\n                    )\n                    :(\n                        <MyBids bids={this.state.bids} bidsChanged={this.getBids}/>\n                    )\n                }\n                \n              \n            </div>\n           \n        </div>\n        );\n    }\n};\n\nexport default withRouter(BuyerPage);"]},"metadata":{},"sourceType":"module"}