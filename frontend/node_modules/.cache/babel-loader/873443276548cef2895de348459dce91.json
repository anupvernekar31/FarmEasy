{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROJECTS\\\\dbs\\\\frontend\\\\src\\\\pages\\\\farmerpage\\\\FarmerPage.jsx\";\nimport React from 'react';\nimport AdminHeader from \"../../components/admin-header/AdminHeader\";\nimport NavigationSideBar from '../../components/navigation/Navigation';\nimport { getAuthHeader, getAuthToken, getUserId } from '../../utils/Authorization';\nimport { withRouter } from 'react-router-dom';\nimport axios from 'axios';\nimport AddProductToListing from '../../components/add-product-to-listing/AddProductToListing';\nimport MyListing from '../../components/my-listings/MyListings';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass FarmerPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleMenu = event => {\n      event.preventDefault();\n      this.setState({\n        currentPage: event.target.id\n      });\n    };\n\n    this.state = {\n      nav: [{\n        key: \"1\",\n        active: true,\n        name: 'List a Product'\n      }, {\n        key: \"2\",\n        active: false,\n        name: 'My Listings'\n      }],\n      currentPage: \"1\",\n      user: '',\n      products: []\n    };\n    this.logout = this.logout.bind(this);\n  }\n\n  getProducts() {\n    let authToken = getAuthToken();\n    let id = getUserId();\n    axios.post(\"http://localhost:3030/api/farmer/getAllProducts\", {\n      id\n    }, getAuthHeader(authToken)).then(res => {\n      this.setState({\n        products: res.data\n      });\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  componentDidMount() {\n    const {\n      history\n    } = this.props;\n    let authToken = getAuthToken();\n    let id = getUserId();\n\n    if (id && authToken) {\n      axios.post(\"http://localhost:3030/api/farmer/getUser\", {\n        id\n      }, getAuthHeader(authToken)).then(res => {\n        this.setState({\n          user: res.data\n        });\n      }).catch(e => {\n        localStorage.clear();\n        this.props.handleLogout();\n        history.push('/');\n      });\n      this.getProducts();\n    } else {\n      history.push('/');\n    }\n  }\n\n  logout() {\n    const {\n      history\n    } = this.props;\n    localStorage.clear();\n    this.props.handleLogout();\n    history.push('/');\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(NavigationSideBar, {\n        navitems: this.state.nav,\n        navtitle: \"FarmEasy\",\n        handleMenuClick: this.handleMenu,\n        currentPage: this.state.currentPage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-column\",\n        id: \"content-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(AdminHeader, {\n          userName: this.state.user ? this.state.user.username : \"Loading\",\n          handleLogout: this.logout\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 17\n        }, this), this.state.currentPage === \"1\" ? /*#__PURE__*/_jsxDEV(AddProductToListing, {\n          products: this.state.products\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 22\n        }, this) : /*#__PURE__*/_jsxDEV(MyListing, {\n          products: this.state.products\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 23\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\n;\nexport default _c = withRouter(FarmerPage);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["D:/PROJECTS/dbs/frontend/src/pages/farmerpage/FarmerPage.jsx"],"names":["React","AdminHeader","NavigationSideBar","getAuthHeader","getAuthToken","getUserId","withRouter","axios","AddProductToListing","MyListing","FarmerPage","Component","constructor","props","handleMenu","event","preventDefault","setState","currentPage","target","id","state","nav","key","active","name","user","products","logout","bind","getProducts","authToken","post","then","res","data","catch","e","console","log","componentDidMount","history","localStorage","clear","handleLogout","push","render","username"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,2CAAxB;AACA,OAAOC,iBAAP,MAA8B,wCAA9B;AACA,SAASC,aAAT,EAAwBC,YAAxB,EAAsCC,SAAtC,QAAuD,2BAAvD;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,mBAAP,MAAgC,6DAAhC;AACA,OAAOC,SAAP,MAAsB,yCAAtB;;;AAEA,MAAMC,UAAN,SAAyBV,KAAK,CAACW,SAA/B,CAAwC;AACpCC,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;;AADc,SAoDlBC,UApDkB,GAoDLC,KAAK,IAAG;AACjBA,MAAAA,KAAK,CAACC,cAAN;AACA,WAAKC,QAAL,CAAc;AAACC,QAAAA,WAAW,EAACH,KAAK,CAACI,MAAN,CAAaC;AAA1B,OAAd;AAEH,KAxDiB;;AAEd,SAAKC,KAAL,GAAa;AACTC,MAAAA,GAAG,EAAG,CAAC;AAACC,QAAAA,GAAG,EAAC,GAAL;AAASC,QAAAA,MAAM,EAAC,IAAhB;AAAsBC,QAAAA,IAAI,EAAC;AAA3B,OAAD,EAA8C;AAACF,QAAAA,GAAG,EAAC,GAAL;AAASC,QAAAA,MAAM,EAAC,KAAhB;AAAuBC,QAAAA,IAAI,EAAC;AAA5B,OAA9C,CADG;AAETP,MAAAA,WAAW,EAAC,GAFH;AAGTQ,MAAAA,IAAI,EAAC,EAHI;AAITC,MAAAA,QAAQ,EAAC;AAJA,KAAb;AAMA,SAAKC,MAAL,GAAc,KAAKA,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAAd;AAGH;;AACDC,EAAAA,WAAW,GACX;AACI,QAAIC,SAAS,GAAG3B,YAAY,EAA5B;AACA,QAAIgB,EAAE,GAAGf,SAAS,EAAlB;AACAE,IAAAA,KAAK,CAACyB,IAAN,CAAW,iDAAX,EAA6D;AAACZ,MAAAA;AAAD,KAA7D,EAAkEjB,aAAa,CAAC4B,SAAD,CAA/E,EAA4FE,IAA5F,CAAiGC,GAAG,IAAI;AACpG,WAAKjB,QAAL,CAAc;AAACU,QAAAA,QAAQ,EAACO,GAAG,CAACC;AAAd,OAAd;AACA,KAFJ,EAEMC,KAFN,CAEYC,CAAC,IAAE;AACTC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACF,KAJJ;AAKH;;AAIDG,EAAAA,iBAAiB,GACjB;AACI,UAAM;AAACC,MAAAA;AAAD,QAAY,KAAK5B,KAAvB;AACA,QAAIkB,SAAS,GAAG3B,YAAY,EAA5B;AACA,QAAIgB,EAAE,GAAGf,SAAS,EAAlB;;AACA,QAAGe,EAAE,IAAIW,SAAT,EACA;AACKxB,MAAAA,KAAK,CAACyB,IAAN,CAAW,0CAAX,EAAsD;AAACZ,QAAAA;AAAD,OAAtD,EAA2DjB,aAAa,CAAC4B,SAAD,CAAxE,EAAqFE,IAArF,CAA0FC,GAAG,IAAI;AAC9F,aAAKjB,QAAL,CAAc;AAACS,UAAAA,IAAI,EAACQ,GAAG,CAACC;AAAV,SAAd;AACD,OAFF,EAEIC,KAFJ,CAEUC,CAAC,IAAE;AACRK,QAAAA,YAAY,CAACC,KAAb;AACA,aAAK9B,KAAL,CAAW+B,YAAX;AACFH,QAAAA,OAAO,CAACI,IAAR,CAAa,GAAb;AACD,OANF;AAOC,WAAKf,WAAL;AACL,KAVD,MAYA;AACIW,MAAAA,OAAO,CAACI,IAAR,CAAa,GAAb;AACH;AAEJ;;AAYDjB,EAAAA,MAAM,GACN;AACI,UAAM;AAACa,MAAAA;AAAD,QAAY,KAAK5B,KAAvB;AACA6B,IAAAA,YAAY,CAACC,KAAb;AACA,SAAK9B,KAAL,CAAW+B,YAAX;AACFH,IAAAA,OAAO,CAACI,IAAR,CAAa,GAAb;AACD;;AAEDC,EAAAA,MAAM,GAAE;AACJ,wBACA;AAAA,8BACI,QAAC,iBAAD;AAAmB,QAAA,QAAQ,EAAE,KAAKzB,KAAL,CAAWC,GAAxC;AAA6C,QAAA,QAAQ,EAAC,UAAtD;AAAiE,QAAA,eAAe,EAAE,KAAKR,UAAvF;AAAmG,QAAA,WAAW,EAAE,KAAKO,KAAL,CAAWH;AAA3H;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAoC,QAAA,EAAE,EAAC,iBAAvC;AAAA,gCACI,QAAC,WAAD;AAAa,UAAA,QAAQ,EAAG,KAAKG,KAAL,CAAWK,IAAZ,GAAkB,KAAKL,KAAL,CAAWK,IAAX,CAAgBqB,QAAlC,GAA2C,SAAlE;AAA6E,UAAA,YAAY,EAAE,KAAKnB;AAAhG;AAAA;AAAA;AAAA;AAAA,gBADJ,EAGQ,KAAKP,KAAL,CAAWH,WAAX,KAAyB,GAAzB,gBACC,QAAC,mBAAD;AAAqB,UAAA,QAAQ,EAAE,KAAKG,KAAL,CAAWM;AAA1C;AAAA;AAAA;AAAA;AAAA,gBADD,gBAEE,QAAC,SAAD;AAAW,UAAA,QAAQ,EAAE,KAAKN,KAAL,CAAWM;AAAhC;AAAA;AAAA;AAAA;AAAA,gBALV;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADA;AAeH;;AAnFmC;;AAoFvC;AAED,oBAAerB,UAAU,CAACI,UAAD,CAAzB","sourcesContent":["import React from 'react';\nimport AdminHeader from \"../../components/admin-header/AdminHeader\";\nimport NavigationSideBar from '../../components/navigation/Navigation';\nimport { getAuthHeader, getAuthToken, getUserId } from '../../utils/Authorization';\nimport { withRouter } from 'react-router-dom';\n\nimport axios from 'axios';\nimport AddProductToListing from '../../components/add-product-to-listing/AddProductToListing';\nimport MyListing from '../../components/my-listings/MyListings';\n\nclass FarmerPage extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            nav : [{key:\"1\",active:true, name:'List a Product'},{key:\"2\",active:false, name:'My Listings'}],\n            currentPage:\"1\",\n            user:'',\n            products:[],\n        }\n        this.logout = this.logout.bind(this);\n    \n       \n    }\n    getProducts()\n    {\n        let authToken = getAuthToken();\n        let id = getUserId();\n        axios.post(\"http://localhost:3030/api/farmer/getAllProducts\",{id},getAuthHeader(authToken)).then(res => {\n            this.setState({products:res.data});\n           }).catch(e=>{\n              console.log(e);\n           });\n    }\n\n    \n\n    componentDidMount()\n    {\n        const {history} = this.props;\n        let authToken = getAuthToken();\n        let id = getUserId();\n        if(id && authToken)\n        {\n             axios.post(\"http://localhost:3030/api/farmer/getUser\",{id},getAuthHeader(authToken)).then(res => {\n                this.setState({user:res.data});\n              }).catch(e=>{\n                  localStorage.clear();\n                  this.props.handleLogout();\n                history.push('/');\n              });\n              this.getProducts();\n        }\n        else\n        {\n            history.push('/');\n        }\n       \n    }\n\n\n\n  \n\n    handleMenu = event =>{\n        event.preventDefault();\n        this.setState({currentPage:event.target.id});\n    \n    }\n\n    logout()\n    {\n        const {history} = this.props;\n        localStorage.clear();\n        this.props.handleLogout();\n      history.push('/');\n    }\n\n    render(){\n        return(\n        <div >\n            <NavigationSideBar navitems={this.state.nav} navtitle=\"FarmEasy\" handleMenuClick={this.handleMenu} currentPage={this.state.currentPage}/>\n            <div className=\"d-flex flex-column\" id=\"content-wrapper\">\n                <AdminHeader userName={(this.state.user)?this.state.user.username:\"Loading\"} handleLogout={this.logout}/>\n                {\n                    this.state.currentPage===\"1\"?\n                    (<AddProductToListing products={this.state.products}/>)\n                    :(<MyListing products={this.state.products}/>)\n                }\n                \n            </div>\n           \n        </div>\n        );\n    }\n};\n\nexport default withRouter(FarmerPage);"]},"metadata":{},"sourceType":"module"}