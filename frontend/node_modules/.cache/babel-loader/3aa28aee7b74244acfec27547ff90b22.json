{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROJECTS\\\\dbs\\\\frontend\\\\src\\\\pages\\\\adminpage\\\\AdminPage.jsx\";\nimport React from 'react';\nimport AddProduct from \"../../components/add-product/AddProduct\";\nimport AdminHeader from \"../../components/admin-header/AdminHeader\";\nimport NavigationSideBar from '../../components/navigation/Navigation';\nimport AddUser from '../../components/add-user/AddUser';\nimport ListUsers from \"../../components/list-users/ListUsers\";\nimport ListProducts from \"../../components/list-products/ListProducts\";\nimport { getAuthHeader, getAuthToken, getUserId } from '../../utils/Authorization';\nimport { withRouter } from 'react-router-dom';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass AdminPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleMenu = event => {\n      event.preventDefault();\n      this.setState({\n        currentPage: event.target.id\n      });\n    };\n\n    this.state = {\n      nav: [{\n        key: \"1\",\n        active: true,\n        name: 'Add Users'\n      }, {\n        key: \"2\",\n        active: false,\n        name: 'Add Products'\n      }],\n      username: '',\n      password: '',\n      userType: 'admin',\n      currentPage: \"1\",\n      user: '',\n      admins: '',\n      farmers: '',\n      buyers: '',\n      products: ''\n    };\n    this.logout = this.logout.bind(this);\n    this.getAdmins = this.getAdmins.bind(this);\n    this.getProducts = this.getProducts.bind(this);\n  }\n\n  componentDidMount() {\n    const {\n      history\n    } = this.props;\n    let authToken = getAuthToken();\n    let id = getUserId();\n\n    if (id && authToken) {\n      axios.post(\"http://localhost:3030/api/admin/getUser\", {\n        id\n      }, getAuthHeader(authToken)).then(res => {\n        this.setState({\n          user: res.data\n        }, () => {\n          console.log(this.state.user);\n        });\n      }).catch(e => {\n        localStorage.clear();\n        this.props.handleLogout();\n        history.push('/');\n      });\n      this.getAdmins();\n      this.getProducts();\n    } else {\n      history.push('/');\n    }\n  }\n\n  getAdmins() {\n    let authToken = getAuthToken();\n    let id = getUserId();\n    axios.post(\"http://localhost:3030/api/admin/getAll\", {\n      id,\n      userType: \"admin\"\n    }, getAuthHeader(authToken)).then(res => {\n      this.setState({\n        admins: res.data\n      });\n    }).catch(e => {\n      console.log(e);\n    });\n    axios.post(\"http://localhost:3030/api/admin/getAll\", {\n      id,\n      userType: \"farmer\"\n    }, getAuthHeader(authToken)).then(res => {\n      this.setState({\n        farmers: res.data\n      });\n    }).catch(e => {\n      console.log(e);\n    });\n    axios.post(\"http://localhost:3030/api/admin/getAll\", {\n      id,\n      userType: \"buyer\"\n    }, getAuthHeader(authToken)).then(res => {\n      this.setState({\n        buyers: res.data\n      });\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  getProducts() {\n    let authToken = getAuthToken();\n    let id = getUserId();\n    axios.post(\"http://localhost:3030/api/admin/allProducts\", {\n      id\n    }, getAuthHeader(authToken)).then(res => {\n      this.setState({\n        products: res.data\n      });\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  logout() {\n    const {\n      history\n    } = this.props;\n    localStorage.clear();\n    this.props.handleLogout();\n    history.push('/');\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(NavigationSideBar, {\n        navitems: this.state.nav,\n        navtitle: \"FarmEasy\",\n        handleMenuClick: this.handleMenu,\n        currentPage: this.state.currentPage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-column\",\n        id: \"content-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(AdminHeader, {\n          userName: this.state.user ? this.state.user.username : \"Loading\",\n          handleLogout: this.logout\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 17\n        }, this), this.state.currentPage === \"1\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-warning\",\n          children: [/*#__PURE__*/_jsxDEV(AddUser, {\n            adminChange: this.getAdmins\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(ListUsers, {\n            admins: this.state.admins,\n            farmers: this.state.farmers,\n            buyers: this.state.buyers,\n            adminChange: this.getAdmins\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 18\n        }, this) : this.state.currentPage === \"2\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-danger\",\n          children: [/*#__PURE__*/_jsxDEV(AddProduct, {\n            productChange: this.getProducts\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(ListProducts, {\n            products: this.state.products,\n            productChange: this.getProducts\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 18\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\n;\nexport default _c = withRouter(AdminPage);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["D:/PROJECTS/dbs/frontend/src/pages/adminpage/AdminPage.jsx"],"names":["React","AddProduct","AdminHeader","NavigationSideBar","AddUser","ListUsers","ListProducts","getAuthHeader","getAuthToken","getUserId","withRouter","axios","AdminPage","Component","constructor","props","handleMenu","event","preventDefault","setState","currentPage","target","id","state","nav","key","active","name","username","password","userType","user","admins","farmers","buyers","products","logout","bind","getAdmins","getProducts","componentDidMount","history","authToken","post","then","res","data","console","log","catch","e","localStorage","clear","handleLogout","push","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport AddProduct from \"../../components/add-product/AddProduct\";\nimport AdminHeader from \"../../components/admin-header/AdminHeader\";\nimport NavigationSideBar from '../../components/navigation/Navigation';\nimport AddUser from '../../components/add-user/AddUser';\nimport  ListUsers from \"../../components/list-users/ListUsers\";\nimport ListProducts from \"../../components/list-products/ListProducts\";\nimport { getAuthHeader, getAuthToken, getUserId } from '../../utils/Authorization';\nimport { withRouter } from 'react-router-dom';\n\nimport axios from 'axios';\n\nclass AdminPage extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            nav : [{key:\"1\",active:true, name:'Add Users'},{key:\"2\",active:false, name:'Add Products'}],\n            username: '',\n            password: '',\n            userType: 'admin',\n            currentPage:\"1\",\n            user:'',\n            admins:'',\n            farmers:'',\n            buyers:'',\n            products:''\n        }\n        this.logout = this.logout.bind(this);\n        this.getAdmins = this.getAdmins.bind(this);\n        this.getProducts = this.getProducts.bind(this);\n       \n    }\n\n    componentDidMount()\n    {\n        const {history} = this.props;\n        let authToken = getAuthToken();\n        let id = getUserId();\n        if(id && authToken)\n        {\n             axios.post(\"http://localhost:3030/api/admin/getUser\",{id},getAuthHeader(authToken)).then(res => {\n                this.setState({user:res.data},()=>{console.log(this.state.user);});\n              }).catch(e=>{\n                  localStorage.clear();\n                  this.props.handleLogout();\n                history.push('/');\n              });\n\n              this.getAdmins();\n              this.getProducts();\n        }\n        else\n        {\n            history.push('/');\n        }\n       \n    }\n\n    getAdmins()\n    {\n        let authToken = getAuthToken();\n        let id = getUserId();\n        axios.post(\"http://localhost:3030/api/admin/getAll\",{id,userType:\"admin\"},getAuthHeader(authToken)).then(res => {\n            this.setState({admins:res.data});\n           }).catch(e=>{\n              console.log(e);\n           });\n           axios.post(\"http://localhost:3030/api/admin/getAll\",{id,userType:\"farmer\"},getAuthHeader(authToken)).then(res => {\n            this.setState({farmers:res.data});\n           }).catch(e=>{\n              console.log(e);\n           });\n           axios.post(\"http://localhost:3030/api/admin/getAll\",{id,userType:\"buyer\"},getAuthHeader(authToken)).then(res => {\n            this.setState({buyers:res.data});\n           }).catch(e=>{\n              console.log(e);\n           });\n    }\n\n    getProducts()\n    {\n        let authToken = getAuthToken();\n        let id = getUserId();\n        axios.post(\"http://localhost:3030/api/admin/allProducts\",{id},getAuthHeader(authToken)).then(res => {\n            this.setState({products:res.data});\n           \n           }).catch(e=>{\n              console.log(e);\n           });\n    }\n\n\n  \n\n    handleMenu = event =>{\n        event.preventDefault();\n        this.setState({currentPage:event.target.id});\n    \n    }\n\n    logout()\n    {\n        const {history} = this.props;\n        localStorage.clear();\n        this.props.handleLogout();\n      history.push('/');\n    }\n\n    render(){\n        return(\n        <div >\n            <NavigationSideBar navitems={this.state.nav} navtitle=\"FarmEasy\" handleMenuClick={this.handleMenu} currentPage={this.state.currentPage}/>\n            <div className=\"d-flex flex-column\" id=\"content-wrapper\">\n                <AdminHeader userName={(this.state.user)?this.state.user.username:\"Loading\"} handleLogout={this.logout}/>\n                {(this.state.currentPage===\"1\")?\n                (<div className=\"bg-warning\">\n                <AddUser adminChange={this.getAdmins}/>\n                <ListUsers admins={this.state.admins} farmers={this.state.farmers} buyers={this.state.buyers} adminChange={this.getAdmins}/>\n                </div>)\n                :(this.state.currentPage===\"2\")?\n                (<div className=\"bg-danger\">\n                    <AddProduct productChange={this.getProducts}/>\n                    <ListProducts products={this.state.products} productChange={this.getProducts}/>\n                    </div>\n                        )\n                :null\n            }\n                 \n            </div>\n           \n        </div>\n        );\n    }\n};\n\nexport default withRouter(AdminPage);"]},"metadata":{},"sourceType":"module"}